\section{Анализ проблемы}

\subsection{Анализ предметной области}

Для исследования предметной области было выбрано расписание занятий студенческой группы 147 ФГБОУ ВО <<СГУ им. Питирима Сорокина>> на первый семестр 2018/2019 учебного года  представленное на рисунке \ref{schedule-147}.

\addimg{schedule_147}{0.66}{Расписание 147 группы}{schedule-147}

Расписания представляет собой таблицу, состоящую из столбцов, представленных в таблице \ref{schedule-header}.

\begin{tbl}{Шапка расписания}{schedule-header}
  \begin{tabularx}{\textwidth}{| *{3}{c |} X |}
  \hline День недели & Номер пары & Время & Предмет (наименование, тип, преподаватель, кабинет, ограничения) \\
  \hline
  \end{tabularx}
\end{tbl}

Рассмотрев приведенное расписание, можно сделать вывод, что последний столбец - перегружен.
Также он может разделятся на дополнительные столбцы в зависимости от количества подгрупп в группе.

В свою очередь конкретные ячейки в столбце предмета могут дробиться горизонтально на две ячейки с <<режимами>> - числитель и знаменатель.
В момент начала, действия расписания начинается отсчет недель, где недели с нечетным номером являются числителем, а с четным - знаменателем.

Основные типы ограничений, которые могут дополнительно возникать в расписании:
\begin{easylist}
  & Предмет начинается с конкретной даты
  & Предмет оканчивается конкретной датой
  & Предмет преподается в конкретный период
  & Предмет не преподается по конкретным датам
  & Предмет преподается только по конкретным датам
\end{easylist}

Представленный выше набор атрибутов позволяет организовывать комплексные расписания периодично (то есть на протяжении времени действия расписания, оно повторяется с некоторым периодом).
Таким образом конечным видом расписания становится - таблица.

Обратная сторона периодичности - перегруженность большинства полей и необходимость вычисления метаданных (числитель, знаменатель).
Данные проблемы отрицательно сказываются на репрезентативности докемента.

Один из способов избавить комплексное расписание - изменить подход к его представлению.
Например в виде упорядоченного по времени списка, макета которого представлен на рисунке \ref{tasks}.

\addimg{tasks}{0.4}{Представление расписания в виде списка}{tasks}

Данное представление обладает всей необходимой информацией для студента подгруппы <<а>> на 26.11.2018 число.
А также избавлено от перегруженности и нерелевантной информации.

На основе полученных данных можно в рамках проекта сформируем необходимый набор терминов и понятий:

Расписание - упорядоченная по времени информация о предстоящих событиях

Комплексное расписание - расписание, которое не может быть выражено в периодической форме без ввода некоторых условностей (режимы недель <<числитель>> и <<знаменатель>>)

Событие - ограниченное во времени неизменное положение вещей.
Например событие <<пара>> может быть описано следующим способом:
\begin{easylist}
  & Предмет: проектирование информационных систем
  & Тип пары: лекция
  & Преподаватель: Иванов И. И.
  & Место проведения: 427
  & Время: 18.12.2018 11:20 - 18.12.2018 12:50
\end{easylist}

Состояние (расписания) - событие наблюдаемое в текущий момент времени.

\subsection{Текущее состояние}

\subsubsection{Сценарии использования}

На текущий момент наиболее распространенные сценарии использования расписания в порядке убывания актуальности могут выглядеть следующим образом:

\begin{easylist}
  & Просмотр необновляемой цифровой копии на мобильном устройстве (фотография, *.pdf или иной файловый формат, расположенный на локальном носителе).
  & Просмотр расписания с мобильного устройства на web-сайте или каком-либо сервере, которое может обновляться уполномоченным на это сотрудником учебной организации (будем называть его далее  <<актуальным>>).
  & Просмотр необновляемой цифровой копии с ПК.
  & Просмотр актуального расписания на доске расписаний.
  & Просмотр актуального расписания с ПК.
\end{easylist}

Экспресс-опрос студентов показал, что наиболее актуальным сценарием использованием является применение мобильных платформы.

\subsubsection{Модель процесса}

Рассмотрим AS-IS модель процесса (рисунок \ref{as-is}) планирования с использованием комплексного расписания.

\addimg{as_is}{0.8}{Модель процесса <<планирование с использованием комплексного расписания>>, AS-IS}{as-is}

Из данной модели видно, что процесс планирования по готовому комплексному расписанию сопряжен с необходимостью вычисления метаданных.
Для приведенного в качестве примера расписания, такими действиями являются - определение режима недели и наложение ограничений предмета на выбранный период.

Подобные действия в действительности являются раздражающими и часто становятся причинами различных ошибок.

\subsection{Предлагаемое решение}

Существует несколько способов избавления от данного этапа:
\begin{easylist}
  & Не использовать метаданные в расписании, что приведет расписание к классу <<простых>> и его неминуемому <<раздуванию>>. Данное решение, возможно, даже несколько ухудшит ситуацию
  & Автоматизация процесса вычисления метаданных и выборки событий
\end{easylist}

Будем рассматривать второй вариант решения проблемы.
Для применения автоматизации необходимо понять в чем заключается принципиальная разница между вычислением метаданных и выборкой событий.
Для человека существует набор <<очевидных>> данных, таких как время и дата, для них на не используются вычисления как таковые.
Однако такие параметры, как текущий режим недели с точки зрения человека, нельзя отнести к <<очевидным>>.
В свою очередь, для компьютера операция по определению текущей даты и времени не отличаются от определения текущего режима недели.
Из этого следует, что в автоматизированном процессе выделение вычисления метаданных как отдельного этапа - не рационально.

Используя подход автоматизации построим модель процесса TO-BE (рисунок \ref{to-be}).

\addimg{to_be}{0.8}{Модель процесса <<планирование с использованием комплексного расписания>>, TO-BE}{to-be}

Из представленной модели, следует, что операции по вычислению метаданных и выбору событий из расписания берет на себя приложение, представляя расписание готовое для планирования.

\subsection{Существующие решения}

На сегодняшний день существует приложение, позволяющее решать описанную проблему.

\subsubsection{SHEView}

SHEView - приложение для операционной системы Android, которое позволяет представлять комплексное расписание в виде списка <<событий>>, сгруппированных по датам.
Интерфейс приложения представлен на рисунке \ref{sheview}.

\begin{figure}[!htb]
  \minipage{0.32\textwidth}
      \includegraphics[width=\linewidth]{sheview}
  \endminipage\hfill
  \minipage{0.32\textwidth}
      \includegraphics[width=\linewidth]{sheview_menu}
  \endminipage\hfill
  \minipage{0.32\textwidth}
      \includegraphics[width=\linewidth]{sheview_groups}
  \endminipage
  \caption{Интерфейс программы SHEView} \label{sheview}
\end{figure}

Данное приложение позволяет просматривать комплексное расписание в виде списка событий, сгруппированных по дням.
Кроме того, имеется доступ к справочникам: преподаватели и предметы.
Поскольку приложение ориентировано на работу с разделяемыми расписаниями, в нем реализована возможность выбора подгруппы.

\subsubsection{SHEMaker}

Создание файла расписания происходит в специальной программе - <<SHEMaker>>, интерфейс которой представлен на рисунке \ref{shemaker}.

\addimg{shemaker}{0.8}{Окно ввода правил расписания SHEMaker}{shemaker}

Создание расписание начинается с заполнения окна настроек (Рисунок \ref{shemaker-settings}), в зависимости от выбранных флагов на данном этапе, далее будут доступны от 2 до 5 экранов ввода справочной информации: график занятий, режимы, группы, преподаватели, занятия.

\addimg{shemaker_settings}{0.8}{Окно ввода настроек расписания SHEMaker}{shemaker-settings}

После переключения флага в правом верхнем углу (рисунок \ref{shemaker}), программа переходит в режим ввода правил расписания, становятся доступны семь окон ввода, по одному на день недели, в каждом окне находится таблица со столбцами, представленными в таблице \ref{schedule-editor-header}.

\begin{tbl}{Шапка таблицы ввода правил расписания}{schedule-editor-header}
  \begin{tabularx}{\textwidth}{| *{10}{X |}}
    \hline Номер
    & Исклю--чение
    & Время
    & Группа
    & Режим
    & Преп--одава--тель
    & Предм--ет
    & Место
    & Начало
    & Конец \\
    \hline
  \end{tabularx}
\end{tbl}

Строка изображенной таблицы преимущественно состоит из полей - выпадающих списков, содержащих справочную информацию, вносимую на предыдущем этапе.
Поле место заполняется как текстовое, исключением маркируются строки, которые на этапе вычисления будут отсеивать события, с эквивалентными параметрами.

Для хранения и передачи информации о расписании между приложениями используется разработанная структура JSON-файла, отношения в которой можно выразить в виде ER-диаграммы изображенной на рисунке \ref{er-diagram}.

\addimg{erd}{0.8}{Структура файла расписания}{er-diagram}

Дадим описание некоторых используемых сущностей (остальные достаточно очевидны):

\begin{easylist}
  & schedule - расписание
  && date\_from, date\_to - даты начала и окончания расписания
  && modes\_enabled - использовать данные из поля mode
  && groups\_enabled - использовать данные из поля group
  && teachers\_enabled - использовать данные из поля teacher
  & mode - режим, является подмножеством цикла режимов (для расписания, приведенного в качестве примера, цикл составляет 2 недели).
  && from - начало периода
  && length - продолжительность периода
  && name - наименование периода
  & event - событие
  && day - день недели
  && exception - исключение, в ходе процесса построения расписание событие с указанными атрибутами будет исключено из потока событий
  && place - строковое поле, для указания места проведения
\end{easylist}

Данная модель данных позволяет описывать различные вариации учебных расписаний, как для студенческих групп, так и для преподавателей.
Для представления простых расписаний имеется возможность не использовать функционал режимов.

\subsubsection{Итог}

Существующее решение в виде приложений <<SHEView>> и <<SHEMaker>> может быть использовано в процессе представления комплексных расписаний, однако оно имеет ряд неприятных ограничений:

\begin{easylist}
  & малый охват платформ
  & необходимость обработки актуального расписания человеком во время создания файла расписания
  & конечный набор атрибутов события и простая модель режимов
\end{easylist}

Имея данный набор ограничений, решение не может называться универсальным.

\subsection{Анализ требований}

Определим стейкхолдеров для текущего проекта (таблица \ref{schedule-editor-header}).

\begin{tbl}{Матрица стейкхолдеров}{schedule-editor-header}
  \begin{tabularx}{\textwidth}{| p{1.6cm} | p{1.5cm} | X | p{1.5cm} | X | X |}
  \hline Название
  & Статус
  & Ожидания от проекта
  & Степень влияния
  & Связанные риски
  & Стратегия \\
  \hline Красиль--ников Роман
  & Исполни--тель
  & Успешное достижение поставленных целей
  & 10
  & Недостаточная компетентность \newline Безответстве--нность
  & Постоянное поддержание контакта \newline Установка дедлайнов \\
  \hline Студенты и преподаватели
  & Пользо--ватель
  & Работоспосо--бный продукт
  & 4
  & Незаинтересова--нность \newline Сопротивление
  & Тесное взаимодействие \newline Демонстрация продукта \\
  \hline Разрабо--тчики
  & Пользо--ватель
  & Необходимый функционал
  & 3
  & Высокие требования \newline Незаинтересова--нность
  & Разработка документации \newline Совершенство--вание кодовой базы \\
  \hline
  \end{tabularx}
\end{tbl}

Сформулируем общие требования от лица пользователя к процессу автоматизации <<планирования на основе комплексного расписания>>.

\begin{easylist}
  & Добавление комплексного расписания в систему, путем извлечения данных из существующего расписания
  & Просмотр комплексного расписания
  && Выбор способа представления
  && Выбор периода представления
\end{easylist}

Требования от лица разработчиков

\begin{easylist}
  & Дружественный программный интерфейс
  & Эффективная работа алгоритмов
  & Минимальное количество рутинных операций
\end{easylist}

Пользовательские требования можно представить в виде UseCase диаграммы изображенной на рисунке \ref{use-case}.

\addimg{use_case}{0.8}{UseCase диаграмма}{use-case}

Также выделим некоторые нефункциональные требования к системе.
\begin{easylist}
  & Реализация для всех платформ - приложение может быть запущено на всех актуальных платформах
  & Возможность работы без доступа к сети
\end{easylist}

\clearpage