# Проектирование приложения для представления комплексных расписаний с использованием подхода Progressive Web Application

Представляю работу на тему Проектирование приложения для представления комплексных расписаний с использованием подхода Progressive Web Application

# Введение

Целью данной работы является проектирование приложения для представления комплексных расписаний.
Для достижения поставленной цели необходим решить ряд задач:
- Анализ предметной области
- Определение способа реализации
- проектирование архитектуры приложения
- Реализация приложения

Для начала разберемся в основных понятиях упомянутых в теме доклада

# Progressive Web Application

Это группа веб-приложений использующих современные возможности веб-платформы, такие как:
* различные web-workers
* манифесты приложений
* пуш-нотификации

Что позволяет им устранить недостатки классических веб-приложений и приблизиться по своим возможностям к нативным

# Комплексное расписание

Можно выделить два типа расписаний:
* Периодические - расписания, действия которых повторяются через конкретный промежуток времени (период)
* Непериодические - расписания, в которых отсутствуют требования обязательного повторения событий, через заданный промежуток времени

В теории пересечение данных множеств должно быть пустым множеством, но на практике можно выделить третий тип расписаний – комплексные.
Давайте рассмотрим пример.

# Пример комплексное расписание

Данные расписания характеризуются необходимостью произведения дополнительных вычислений для их интерпретации.
В случае примера необходимо знать текущую дату и режим недели, что отрицательно отражается на восприятии расписания.
Рассмотрим модель процесса планирования с использованием комплексного расписания.

# Модель процесса планирования

## AS-IS

Из данной модели видно, что человеку необходимо выполнять дополнительные вычисления для получения плана событий.
Для избавления человека от дополнительных вычислений был выбран метод автоматизации процесса представления расписания посредством реализации приложения.
Процесс планирования с использованием приложения может выглядеть следующим образом.

## TO-BE

Приложение производит все вычисления и выборку необходимых событий.
Результат работы приложения может выглядеть следующим образом.

# Результат представления расписания

В виде списка событий.
Данное представление избавлено от нерелевантной информации и позволяет получить необходимую информацию.

# Что такое расписание?

По сути расписание – это упорядоченная по времени информация о предстоящих событиях
Тогда можно представить расписание в виде функции определенной на временном промежутке.
Область значения функции - состояния расписания, характеризующиеся набором атрибутов и образующие события.
Основываясь на данной идеи для представления любого расписания достаточно вычислить состояния и объединить их в события на необходимом временном промежутке.

# Сущности приложения

На диаграмме представлены основные сущности приложения.
Для их взаимодействия используются следующие компоненты:
- конвертор
- генератор временного периода
- вычислитель состояний
- группировщик

Рассмотрим их подробно.

# Конвертор

Конвертор позволяет создавать функцию расписания.

Для описания и интерпретации функции расписания был разработан DSL, позволяющий описывать шаблоны функций, по которым могут быть сформированы композиции нативных функций.
Используя данный DSL генерируются шаблоны функций, позволяющие вычислять значения атрибутов событий.

Слева представлены входные данные.
Справа - шаблон функции созданный для вычисления состояния атрибута комната.

# Генерация временного промежутка

Для представления расписания необходимо выбрать временной период, на котором будет вычислена функция расписания.
Указав оптимальный временной период можно значительно сократить количество вычислений.

Оптимальность временного периода достигается путем исключения дат.
Для применения такого рода ограничений, временной период можно представить в виде дискретной иерархической структуры и применять соответствующее ограничение на необходимом уровне.

Например для учебного расписания:
- не нужно рассчитывать события по воскресениям
- исключение праздничных дней
- время с 10 вечера до 8 утра
- можно вычислять состояние расписания каждые 10 минут

# Вычислитель состояний

Вычислитель состояний выстраивает функции вычислений значений атрибутов событий в определенном порядке.
Затем последовательно вычисляет их, добавляя вычисленное значение к начальному состоянию.
По окончанию вычислений получается объект описывающий состояние расписания на конкретный момент.

# Группировщик

Нередко вычисленные состояния описывают одно и тоже событие, для их объединения применяется группировщик.
Он производит объединение на основе сравнения значений атрибутов и временного промежутка между состояниями.

# Применение

Используя вышеперечисленные компоненты было реализовано клиентское веб-приложение, позволяющее:
- генерировать функцию расписания на основе в данных о расписании
- просматривать различные расписания в списочном виде используя различные способы группировки
- организовать единое место доступа к различным расписаниям